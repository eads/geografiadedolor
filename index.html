{% extends "_geografia_base.html" %}

{% block content %}
<div id="index-map">
  <div id="index-nav">
    <h1>
      <span id="line1">Geografia del</span>
      <span id="line2">Dolor</span>
    </h1>
  </div>

  {% for marker in markers %}
  	<div data-toggle="modal" data-keyboard="true" data-target="#{{ marker.state|slugify|lower }}-modal" class="marker" style="top: {{ marker.y }}%; left: {{ marker.x }}%">
     <div class="marker-inner"></div>
    </div>
	{% endfor %}
</div>

{% for marker in markers %}
<div class="modal fade" id="{{ marker.state|slugify|lower }}-modal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h2 class="modal-title">{{ marker.state }}</h2>
      </div>
      <div class="modal-body">
        <p>Under construction</p>
      </div>
    </div>
  </div>
</div>
{% endfor %}

{% endblock content %}

{% block scripts %}
<script>

// Use natural aspect ratio of map to set height and maintain
// proper marker size
var sizeMap = function() {
  var width = $('#index-map').width(),
      windowHeight = $(window).height(),
      aspect = 0.5625,
      height = width * aspect,
      top = ((windowHeight / 2) - (height / 2));

  $('#index-map').css({
    'height': height + 'px',
    'top': (top > 0) ? top + 'px' : 0,
  });
}

$(document).ready(function() {
  // Fit the headline text
  $("#line1").fitText(0.6);
  $("#line2").fitText(0.4);

  // Size map on init, also resize
  sizeMap();
  $(window).on('resize', sizeMap);
})

</script>
{% endblock %}
