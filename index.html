{% extends "_geografia_base.html" %}

{% block content %}
<div id="index-map">
  <h1 id="project-title">
    <span id="line1">Geografía del</span>
    <span id="line2">Dolor</span>
  </h1>

  <div id="tools">
    <div class="container-fluid">
      <div class="row">
        <div class="share">
          <div class="nav-tool nav-share twitter" data-toggle="tooltip" data-placement="top" data-title="Twitter"></div>
          <div class="nav-tool nav-share facebook" data-toggle="tooltip" data-placement="top" data-title="Facebook"></div>
        </div>
        <div class="buttons">
          <div id="fullscreen" class="nav-tool">
            <i class="icon icon-resize-full active" data-toggle="tooltip" data-placement="bottom" data-title="Pantalla completa<br/>(Fullscreen)"></i>
            <i class="icon icon-resize-small" data-toggle="tooltip" data-placement="bottom" data-title="Salir de la pantalla completa<br/>(Exit fullscreen)"></i>            
          </div>
          <div id="mute" class="nav-tool">
            <i class="icon icon-volume-off active" data-toggle="tooltip" data-placement="bottom" data-title="Sin musica<br/>(Stop music)"></i>
            <i class="icon icon-volume-up" data-toggle="tooltip" data-placement="bottom" data-title="Con musica<br/>(Play music)"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="markers">
  {% for marker in markers %}
    {% set slug = marker.state|slugify|lower %}
  	<div id="marker-{{ slug }}" data-toggle="modal" data-keyboard="true" data-target="#{{ slug }}-modal" class="marker" style="top: {{ marker.y }}%; left: {{ marker.x }}%">
     <div class="marker-inner" data-toggle="tooltip" data-placement="top" data-title="{{ marker.state }}"></div>
    </div>
	{% endfor %}
  </div>

  <div id="marker-list">
    <div class="container">
      {% for marker in markers %}
      {% set slug = marker.state|slugify|lower %}
      <div class="row" data-toggle="modal" data-target="#{{ slug }}-modal">
        <div class="col-xs-5">
          <img class="img-responsive" src="img/{{ slug }}/{{ slug }}-1.jpg" />
        </div>
        <div class="col-xs-7">
          <h2>{{ marker.state }} <i class="glyphicon glyphicon-chevron-right"></i></h2>
          <p>
            {{ marker.victim }}
          </p>
        </div>
      </div>
	    {% endfor %}
    </div>
  </div>

  <div id="logo">
    <a href="http://sacbeproducciones.com/"><img src="img/sacbe-logo.png" class="img-responsive" /></a>
  </div>



  <div id="quotes">
    <div id="quote-carousel" class="carousel slide" data-ride="carousel" data-interval="8000">
      <div class="carousel-inner">
        {% set quotes = markers|filter_quotes %}
        {% for marker in quotes %}
        {% set slug = marker.state|slugify|lower %}
        <div class="item {% if loop.index == 1 %}active{% endif %}" data-state="{{ slug }}">
          <div class="item-table-wrapper">
            <div class="item-cell-wrapper" data-toggle="modal" data-target="#{{ slug }}-modal">
              {% if marker.quote_es %}
              <p>&ldquo;{{ marker.quote_es }}&rdquo;</p>
              {% endif %}
              <p class="state">&mdash;&mdash;&mdash; {{ marker.state }} &mdash;&mdash;&mdash;</p>
              {% if marker.quote_en %}
              <p>&ldquo;{{ marker.quote_en }}&rdquo;</p>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
</div>

</div>

{% for marker in markers %}

{% set gallery_size = marker.gallery_size %}
{% set slug = marker.state|slugify|lower %}

<div class="modal fade" id="{{ slug }}-modal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h3 class="modal-title">{{ marker.state }}</h3>
      </div>
      <div class="modal-body">
        <p class="victims">
          Víctimas / Victims: <strong>{{ marker.victim }}</strong>
        </p>
        {% if gallery_size > 1 %}
        <div id="{{ slug }}-gallery" class="carousel slide" data-ride="carousel" data-interval="false">
          <div class="carousel-inner">
            {% for x in range(1, gallery_size + 1) %}
            <div class="item {% if x == 1 %}active{% endif %}">
              <img class="img-responsive {% if x != 1 %}lazy{% endif %}" {% if x != 1 %}data-original{% else %}src{% endif %}="img/{{ slug }}/{{ slug }}-{{ x }}.jpg" />
            </div>
            {% endfor %}
          </div>
          <!-- Controls -->
          <a class="left carousel-control" href="#{{ slug }}-gallery" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
          </a>
          <a class="right carousel-control" href="#{{ slug }}-gallery" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
          </a>
        </div>
        {% else %}
          <img class="img-responsive" src="img/{{ slug }}/{{ slug }}-1.jpg" />
        {% endif %}
        <p class="conoce"><a href="espacio/{{ slug }}/" class="btn btn-block btn-lg btn-watch">Conoce la historia / Learn the story <i class="glyphicon glyphicon-play-circle"></i></a></p>
      </div>
    </div>
  </div>
</div>

{% endfor %}

<audio id="soundtrack" src="img/audio/geografia.mp3"></audio>

{% endblock content %}

{% block scripts %}
<script src="js/bigscreen.min.js"></script>
<script src="js/app.js"></script>
{% endblock scripts %}
